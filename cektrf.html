<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <title>CekTarif</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
     <!-- ==============navbar start ==============-->
     <nav class="navbar">
             
        <div class="logo">
            <a href="index.html"><img src="image/logo1.png" alt="img" height="40px" ></a>
        </div>

        <div class="hamburger" id="hamburger">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
        <!-- <div class="menu-toggle">
            <i class="fas fa-bars"></i>
        </div> -->
        <ul class="menu">
             <!-- <li class="menu-item dropdown">
                <a href="#">Order<i class="fas fa-chevron-down"></i></a>
                <ul class="submenu">
                    <li><a href="#">Drop Of </a></li>
                    <li><a href="#">Pickup</a></li>
                </ul>
            </li> -->
            <li class="menu-item dropdown">
                <a href="#">Search<i class="fas fa-chevron-down"></i></a>
                <ul class="submenu">
                    <li><a href="lacak.html">Tracking</a></li>
                    <li><a href="cektrf.html">Cek Tarif</a></li>
                    <li><a href="lokasi.html">Cek Lokasi</a></li>
                </ul>
            </li>
            <li class="menu-item dropdown">
                <a href="#">Information<i class="fas fa-chevron-down"></i></a>
                <ul class="submenu">
                    <li><a href="faq.html">FAQ</a></li>
                    <li><a href="#">Terms</a></li>
                </ul>
            </li>
            <li class="menu-item dropdown">
                <a href="#">AboutUs<i class="fas fa-chevron-down"></i></a>
                <ul class="submenu">
                    <li><a href="profile.html">Company Profile</a></li>
                    <li><a href="#">News & Event</a></li>
                </ul>
            </li>
        </ul>
    </div>
        <!-- <div class="user">
            <a href="login.html" class="login">Login</a>
            <a href="registrasi.html" class="signup">SignUp</a>
        </div> -->
    </nav>
    <!-- ==============navbar end ================-->



<!-- konten gambar jalan -->
<div class="slider-container">
    <div class="slider">
        <div class="slide">
            <a href="#"><img src="image/cektrf.png" alt="Gambar 1" > </a>
        </div>
       
    </div>
</div>
<!-- konten gambar end -->

<!-- kotak fitur start -->
<div class="container-fitur">
    <div class="fitur-cektrf">
        <label  >Hitung Jarak:</label> <!-- Modifikasi label -->
        <p>Masukkan Asal, Tujuan, dan berat barang Anda dalam KG</p>
        <div class="input-row">
            <input type="text" id="origin" placeholder="Kota asal">
            <input type="text" id="destination" placeholder="Kota tujuan">
            <button onclick="calculateDistance()">Hitung Jarak</button>
    <p>Jarak: <span id="distance"></span> Km</p>  
        </div>
        <div class="input-row">
            <label for="weight">Berat Barang (kg):</label>
            <input type="number" id="weight" step="0.01" required>
        </div>
        
        
        <button onclick="calculateShippingCost()">Hitung Tarif</button>
    <p>Biaya pengiriman adalah: <span id="shippingCost"></span></p>
    </div>
</div>
<!-- kotak fitur end -->

<!-- footer start -->
<footer>
    <div class="footer-left">
        <p>&copy; 2023 LemparAja</p>
        <div class="social-icons">
            <img src="image/Bukalapak.png" alt="Facebook">
            <img src="twitter-icon.png" alt="Twitter">
            <img src="instagram-icon.png" alt="Instagram">
        </div>
    </div>
    <div class="footer-center">
        <h4>LemparAja Company</h4>
        <p>Support</p>
        <p>About Us</p>
        <p>Blog</p>
    </div>
    <div class="footer-right">
        <p>Stay up to date</p>
        <div class="email-input">
            <input type="email" placeholder="Enter your email">
            <button>Subscribe</button>
        </div>
    </div>
</footer>
<!-- footer end -->
<!-- <script src="asset/js/navbar.js"></script> -->
<script src="burger.js"></script>
<script>
    let originInput = document.getElementById('origin');
    let destinationInput = document.getElementById('destination');
    let distanceOutput = document.getElementById('distance');
    let geocoder = new google.maps.Geocoder();

    function calculateDistance() {
        let origin = originInput.value;
        let destination = destinationInput.value;

        geocoder.geocode({ 'address': origin }, function (results, status) {
            if (status === 'OK') {
                let originLatLng = results[0].geometry.location;

                geocoder.geocode({ 'address': destination }, function (results, status) {
                    if (status === 'OK') {
                        let destinationLatLng = results[0].geometry.location;

                        let service = new google.maps.DistanceMatrixService();
                        service.getDistanceMatrix(
                            {
                                origins: [originLatLng],
                                destinations: [destinationLatLng],
                                travelMode: 'DRIVING'
                            },
                            function (response, status) {
                                if (status === 'OK') {
                                    let distanceText = response.rows[0].elements[0].distance.text;
                                    distanceText = distanceText.replace(/[^\d.-]/g, '').replace(',', '.');

                                    let distanceNumeric = parseFloat(distanceText);
                                    distanceOutput.textContent = distanceNumeric;
                                    console.log(distanceNumeric);
                                    document.getElementById('distance').value = distanceNumeric;
                                } else {
                                    alert('Gagal menghitung jarak: ' + status);
                                }
                            }
                        );
                    } else {
                        alert('Gagal menemukan lokasi tujuan: ' + status);
                    }
                });
            } else {
                alert('Gagal menemukan lokasi asal: ' + status);
            }
        });
    }

    function calculateShippingCost() {

        const weight = parseFloat(document.getElementById('weight').value);
        const distance = parseFloat(document.getElementById('distance').value);
        const ratePerKg = 5000;
        const ratePerKm = 100;

        console.log(`ini weight: ${weight}, ini distance : ${distance}`);

        const shippingCost = (ratePerKm * distance) + (ratePerKg * weight);
        console.log(`shipping cost : ${shippingCost}`);
        // document.getElementById('shippingCost').textContent = shippingCost.toFixed(2);
        // console.log(`shipping cost : ${shippingCost.toFixed(2)}`);

        // const numb = 1000000;
        const format = shippingCost.toString().split('').reverse().join('');
        const convert = format.match(/\d{1,3}/g);
        const rupiah = 'Rp ' + convert.join('.').split('').reverse().join('') + ',00'

        console.log(rupiah)

        document.getElementById('shippingCost').textContent = rupiah; 
    }
</script>
</body>
</html>